/* ATHENA DESIGN SYSTEMS, 2005.*/

/*=============================================================================
 * FILE: Debug.cpp
 *=============================================================================
 * Debugging utilities...
 *=============================================================================
 */
#include <stdio.h>
#include <stdlib.h>
#include "Debug.h"

static int _DebugLevel = 0;
static FILE *_DebugFp = stderr;

/*-----------------------------------------------------------------------------
 * DebugGetLevel
 *-----------------------------------------------------------------------------
 */
int DebugGetLevel()
{
    return _DebugLevel;
}

/*-----------------------------------------------------------------------------
 * DebugSetLevel
 *-----------------------------------------------------------------------------
 */
void DebugSetLevel(int level)
{
    _DebugLevel = level;
}

/*-----------------------------------------------------------------------------
 * DebugGetFp
 *-----------------------------------------------------------------------------
 */
FILE *DebugGetFp()
{
    return _DebugFp;
}

/*-----------------------------------------------------------------------------
 * DebugSetFp
 *-----------------------------------------------------------------------------
 */
void DebugSetFp(FILE *fp)
{
    _DebugFp = fp;
}

/*-----------------------------------------------------------------------------
 * Debug
 *-----------------------------------------------------------------------------
 * print debugging message
 *-----------------------------------------------------------------------------
 */
void Debug(int debuglevel, const char* format, ...)
{
    va_list ap;
    va_start(ap, format);

    if (_DebugFp == NULL || debuglevel > _DebugLevel) {
	return;
    }
    vfprintf(_DebugFp, format, ap);
    va_end(ap);
    fflush(_DebugFp);
}


