# Feasibility test prototype
#

Type "client -help" and "server -help" for usage.

Valid options are:
-port	: specify the port to listen/connect
-bs     : buffer size for read/write in client/server

-len    : (server only) total size of data to send in *megabytes*
	  This is a float

-n	: (client only) how many threads to create. All of them
	are created and start retrieving data immediately.

Each thread after finishing prints a status line (it starts with the
keyword "END") It has the following fields:
tid	= thread id
nbytes	= bytes read
time	= time (in seconds - 3 decimal digits) to read
rate	= rate achieved in Mbytes/sec. This is equal to:
		nbytes / time / (1024*1024)

At the end the client program prints some global stats. All these lines
start with "STAT".
nclients	: how many client threads were created
nfinished	: how many of them finished without an error (i.e. the found
		an EOF while reading data - as opposed of getting an I/O
		error)
server 		: the server we connected to 
port		: the port we connected to
buffersize	: the buffersize that was used by the clients
mbytes		: total number of mbytes read (sum of mbytes read from
		all threads)
totaltime	: total time needed (sum of time spent from all threads)
mbytes_per_client: How many mbytes each client read (in average)
		This is equal to "mbytes / nfinished"
rate		: rate (Mbytes/sec) achieved. This is nothing more
		than "mbytes / totaltime"

Also we have a finel line that starts with "STATTOTAL" which repeats some
information from the "STAT" lines but in a single line so they can be more
easily parsed.

=========================================================
SOME NUMBERS:
I used 64Kbytes buffer in both server/clients, and each client thread
read 100Mbytes. Number of clients was variable.
Here are the results
column 1	: number of clients
column 2	: rate (MBytes/sec) achieved for each client
column 3	: product of first 2 columns ("server bandwidth")


N	  rate		N * rate
-	-------		-------
1       291.034		291.034
2       121.388 	242.776
3        75.756		227.267
4        52.957		211.829
5        38.303		191.515
10       22.978		229.777
15       14.720		220.808
20       10.829		216.573


NOTE: Numbers are as expected... The total "server bandwidth" is
between 200 ... 300 Mbytes/sec (this is the rate at which the server
serves data) and this bandwidth is divided "fairly" among the clients
