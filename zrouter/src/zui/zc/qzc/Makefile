#############################################################################
# Makefile for building: basicdrawing
# Generated by qmake (1.07a) (Qt 3.3.5) on: Fri Dec 16 10:10:39 2005
# Project:  basicdrawing.pro
# Template: app
# Command: $(QMAKE) -o Makefile basicdrawing.pro
#############################################################################

include ../../../Makefile.defs

####### Compiler, tools and options

# -- use ../../Makefile.local to set this

CC       = gcc
CXX      = g++
LEX      = flex
YACC     = yacc
CXXFLAGS = -pipe -Wall -W -DQT_NO_DEBUG -g -fPIC -m$(BUILD_ARCH) $(DEBUG) -O3
LEXFLAGS = 
YACCFLAGS= -d
INCPATH  = -I$(QTDIR)/mkspecs/linux-g++ -I. -I$(QTDIR)/include -I$(TCLINC) -I$(TOP)/include
LINK     = g++
LFLAGS   = -m$(BUILD_ARCH) $(LD_ARCH) -shared -g 
LIBS     = $(SUBLIBS) -L$(QTDIR)/lib $(X11_LIB) -lqt-mt -lXext -lX11 -lm -L$(TCLLIB) -ltcl8.5 -ltk8.5 
AR       = ar cqs
RANLIB   = 
# MANOLIS
#MOC      = $(QTDIR)/bin/moc
MOC      = moc
UIC      = $(QTDIR)/bin/uic
QMAKE    = qmake
TAR      = tar -cf
GZIP     = gzip -9f
COPY     = cp -f
COPY_FILE= $(COPY)
COPY_DIR = $(COPY) -r
INSTALL_FILE= $(COPY_FILE)
INSTALL_DIR = $(COPY_DIR)
DEL_FILE = rm -f
SYMLINK  = ln -sf
DEL_DIR  = rmdir
MOVE     = mv -f
CHK_DIR_EXISTS= test -d
MKDIR    = mkdir -p


####### Output directory

OBJECTS_DIR = ./

####### Files

HEADERS = renderarea.h renderbox.h \
			dataset.h tagManager.h\
			parse.h tkqt.h \
			debug.h colormap.h \
			globals.h layerset.h qtapp.h \
			image.h


SOURCES = b100.cpp dataset.cpp renderbox.cpp renderarea.cpp parse.cpp qtapp.cpp tkqt.cpp tkqt_wrap.cpp 
OBJECTS = b100.o dataset.o renderbox.o renderarea.o parse.o qtapp.o tkqt.o tkqt_wrap.o 
FORMS = 
UICDECLS = 
UICIMPLS = 
SRCMOC   = moc_renderarea.cpp
OBJMOC = moc_renderarea.o
QMAKE_TARGET = tkqt.so
DESTDIR  = 
TARGET   =  tkqt.so

first: all
####### Implicit rules

.SUFFIXES: .c .o .cpp .cc .cxx .C

.cpp.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.cc.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.cxx.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.C.o:
	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

.c.o:
	$(CC) -c $(CFLAGS) $(INCPATH) -o $@ $<

####### Build rules

all: tags Makefile $(TARGET)

$(TARGET):  $(UICDECLS) $(OBJECTS) $(OBJMOC) 
	$(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJMOC) $(OBJCOMP) $(LIBS)

mocables: $(SRCMOC)
uicables: $(UICDECLS) $(UICIMPLS)

mocclean:
	-$(DEL_FILE) $(OBJMOC)
	-$(DEL_FILE) $(SRCMOC)

uiclean:

yaccclean:
lexclean:
clean: mocclean
	-$(DEL_FILE) $(OBJECTS)
	-$(DEL_FILE) *~ core *.core *.so


tkqt_wrap.cpp: tkqt_swig.h tkqt.i $(HEADERS)
	swig -Iswg -c++ -tcl8 -namespace -o tkqt_wrap.cpp tkqt.i

tkqt.o: tkqt.cpp $(HEADERS)

qtapp.o: qtapp.cpp $(HEADERS)

install:: all
	@echo " installing: tkqt.so lib in $(LIBDIR)"
	@mkdir   -p $(LIBDIR)
	@install -c tkqt.so $(LIBDIR) 

tclcompile: 

####### Sub-libraries

distclean: clean
	-$(DEL_FILE) $(TARGET) $(TARGET)

$(EXT_OBJS): 
	(cd $(TOP)/util; make all)

FORCE:

####### Compile

tags: $(HEADERS) $(SOURCES)
	ctags $(HEADERS) $(SOURCES:tkqt_wrap.cpp=)

dataset.o: dataset.cpp $(HEADERS)

parse.o: parse.h parse.cpp $(HEADERS)

renderarea.o: renderarea.cpp $(HEADERS)

renderbox.o: renderbox.cpp $(HEADERS)

moc_renderarea.o: moc_renderarea.cpp 

moc_renderarea.cpp: renderarea.cpp $(HEADERS)
	$(MOC) renderarea.h -o moc_renderarea.cpp

-include Makefile.local
